[# Java中如何使用DAO？和service，ORM，repository，MVC的model是啥关系？](https://www.zhihu.com/question/589707954/answer/2937836966)

[# Mysql 项目应用笔记（一）](https://pandaychen.github.io/2022/02/01/A-MYSQL-USAGE-REVIEW/)


### 维服务 分布式
微服务
- 一种系统架构的设计方式，**将复杂的业务拆分成多个微小的服务**
- 为了服务可以单独去运行和部署
- 服务之间采用 RPC 通信

分布式
- 一种系统的部署方式，将服务部署到多台机器上
- **分摊机器的负载压力，提高吞吐量**
- 可以采用集群、主备等方式部署


### client如何实现长连接
-  TCP协议的`KeepAlive`机制
- 长：数据库的连接
- 短：web ajax 请求


### SQLx 和 GORM 比较

SQLx 和 GORM 都是 Go 语言中常用的数据库操作工具，它们有不同的设计理念和特点，下面是对它们进行比较的一些方面：

1. 设计理念：
    
    - SQLx：SQLx 是一个简单而轻量级的工具，旨在提供对数据库的基本操作支持，同时保持接口的简洁性和直观性。它提供了基本的 SQL 语句执行、查询参数绑定和结果映射等功能。
    - GORM：GORM 是一个功能丰富的 ORM（对象关系映射）库，它提供了更高级的数据库操作功能，包括模型定义、关联关系处理、预加载、事务管理、数据库迁移等。GORM 追求一种更面向对象的数据库访问方式，尽量隐藏底层 SQL 的细节，提供更高层次的抽象。
2. 查询语法：
    
    - SQLx：SQLx 提供了直接执行 SQL 语句的方法，可以通过参数绑定方式进行查询，并将查询结果映射到结构体中。
    - GORM：GORM 提供了更灵活的查询语法，支持链式调用的方式构建查询，可以进行条件筛选、排序、分页等操作，并且支持预加载关联数据。
3. 数据库支持：
    
    - SQLx：SQLx 支持多种数据库，包括 MySQL、PostgreSQL、SQLite 等，可以通过不同的数据库驱动进行连接。
    - GORM：GORM 也支持多种数据库，包括 MySQL、PostgreSQL、SQLite、SQL Server 等，并且提供了针对不同数据库的特定功能支持。
4. 生态系统和扩展性：
    
    - SQLx：SQLx 是一个相对简洁的工具，没有过多的附加功能，但它可以与其他库和工具很好地集成，如 go-zero 框架的组件。
    - GORM：GORM 是一个功能丰富的 ORM 库，它提供了丰富的特性和插件机制，可以灵活地扩展和定制。同时，GORM 有一个活跃的社区，提供了许多扩展和插件供开发者使用。

综上所述，SQLx 更注重基本的数据库操作和性能，适合那些只需要基本 CRUD 操作的项目；而 GORM 则提供了更高级的 ORM 功能和更丰富的查询语法，适合复杂的业务场景和需要对象关系映射的项目。选择使用哪个工具，取决于您的具体需求和偏好。


### 依赖注入

依赖注入（Dependency Injection，简称DI）是一种软件设计模式，用于管理组件之间的依赖关系。它的核心思想是通过外部将依赖关系传递给组件，而不是组件自己创建或查找依赖关系。

在传统的软件设计中，组件通常会直接创建或查找它们所依赖的其他组件。这样的做法会导致组件与其依赖紧密耦合，难以重用和测试。而使用依赖注入，可以将依赖关系的创建和管理交给外部的容器或框架，从而解耦组件之间的关系，提高代码的可测试性和可维护性。

依赖注入的主要概念如下：

1. 依赖关系（Dependency）：组件 A 依赖于组件 B，意味着组件 A 需要使用组件 B 提供的功能或数据。
    
2. 依赖注入容器（Dependency Injection Container）：是一个管理和创建依赖关系的容器，负责创建组件实例并将依赖关系注入到组件中。
    
3. 依赖注入方式（Dependency Injection Method）：有三种常见的依赖注入方式：
    
    - 构造函数注入（Constructor Injection）：通过构造函数将依赖关系传递给组件。
    - 属性注入（Property Injection）：通过公开的属性或字段将依赖关系注入到组件。
    - 方法注入（Method Injection）：通过调用特定的方法将依赖关系传递给组件。

依赖注入的主要优势包括：

- 解耦性：依赖注入降低了组件之间的耦合度，使得组件更加独立和可复用。
- 可测试性：通过将依赖关系注入到组件中，可以方便地替换和模拟依赖对象，从而简化单元测试的编写。
- 可扩展性：通过依赖注入容器管理依赖关系，可以轻松添加、替换或删除组件，而无需修改组件本身的代码。

总而言之，依赖注入是一种通过外部传递依赖关系的方法，用于解耦组件之间的依赖关系，并提高代码的可测试性和可维护性。它可以通过依赖注入容器来管理依赖关系的创建和传递，从而实现更灵活和可扩展的软件设计。


### 为什么后端总是要 copy 一遍

在后端开发中，经常会涉及到从一个对象复制数据到另一个对象的操作。这种操作通常被称为"拷贝"或"复制"，它的目的是将一个对象的数据赋值给另一个对象，以便在后续的处理中使用。

有几个原因解释了为什么在后端开发中需要进行拷贝操作：

1. 数据隔离：拷贝操作可以创建一个新的对象，使得原始对象和拷贝对象之间相互独立，互不影响。这在并发或并行处理中特别重要，以避免不同线程之间的数据竞争和冲突。
    
2. 安全性：通过拷贝操作，可以防止不小心修改原始对象的数据。如果直接引用原始对象，可能会导致意外修改或破坏原始数据，而通过拷贝操作，可以在拷贝对象上进行修改，而不会影响到原始对象。
    
3. 数据转换：拷贝操作可以用于数据类型的转换，将一个类型的对象转换为另一个类型的对象。这在数据层面的转换和适配中非常常见，例如将数据库查询结果映射到领域对象或将领域对象转换为传输对象。
    

虽然在一些情况下可以直接引用原始对象，但通过拷贝操作可以提供更好的封装性、可维护性和安全性。它可以确保对象的独立性，并提供一种清晰的方式来处理和修改数据。因此，拷贝操作在后端开发中是一种常见的操作手段。


### get query 和path 区别

在 HTTP 请求中，有不同的方式来传递参数，其中两种常用的方式是通过查询字符串（Query String）和路径参数（Path Parameter）。

1. 查询字符串（Query String）：
    
    - 使用 `?` 字符将 URL 的路径和查询字符串分隔开。
    - 查询字符串以 `key=value` 的形式出现，多个参数之间使用 `&` 符号分隔。
    - 例如：`http://example.com/path?key1=value1&key2=value2`
    - 在 Go 中，可以使用 `r.URL.Query()` 方法获取查询字符串参数的键值对。
2. 路径参数（Path Parameter）：
    
    - 路径参数是将参数直接嵌入 URL 的路径中，通常用于表示资源的标识或唯一值。
    - 路径参数使用占位符的形式，通常由大括号 `{}` 括起来。
    - 例如：`http://example.com/path/{param}`
    - 在 Go 的路由中，可以使用路由库（如 Gorilla Mux）定义带有路径参数的路由，并通过参数提取器获取路径参数的值。

区别：

- 查询字符串（Query String）适合传递可选参数、筛选条件或较长的参数列表。它们可以以键值对的形式进行编码，并在 URL 中明确表示参数的名称和值。
- 路径参数（Path Parameter）适合表示唯一标识或资源的属性。路径参数直接嵌入到 URL 路径中，使 URL 更具描述性和可读性。

根据具体的应用场景和需求，可以选择使用查询字符串或路径参数来传递参数。一般而言，如果参数是必需的、对资源进行唯一标识或需要进行精确匹配，路径参数更适合；如果参数是可选的、用于过滤或传递较长的参数列表，查询字符串更适合。