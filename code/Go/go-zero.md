### ServiceContext & context

使用 `ServiceContext` 还是 `context.Context` 取决于你的具体需求和使用场景。

1. 使用 `ServiceContext` 的情况：
    
    - 当你使用 go-zero 框架进行服务开发时，可以使用 `ServiceContext` 来传递和共享与服务相关的上下文信息，如配置、请求上下文、元数据等。`ServiceContext` 提供了一些框架相关的功能和方法，方便你在服务中访问和操作这些信息。
    - 当你需要在服务中访问一些全局的服务配置或上下文信息时，可以将这些信息包装在 `ServiceContext` 中，以便在服务的不同方法或组件中使用。
2. 使用 `context.Context` 的情况：
    
    - 当你编写网络请求处理、并发任务、中间件等代码时，可以使用 `context.Context` 来传递请求相关的上下文信息，如请求的参数、请求的超时控制、请求的取消等。
    - 当你需要控制请求的生命周期，包括超时控制、取消操作等，可以使用 `context.Context` 提供的方法来管理请求的上下文。

需要注意的是，`ServiceContext` 是基于 `context.Context` 的扩展，你可以在需要的情况下将 `context.Context` 转换为 `ServiceContext` 或者从 `ServiceContext` 中获取原始的 `context.Context`，以便在服务的不同层次之间传递和共享上下文信息。

综上所述，如果你使用 go-zero 框架进行服务开发，建议使用 `ServiceContext` 来传递和共享与服务相关的上下文信息；而对于一般的请求处理和并发任务，可以使用标准库的 `context.Context` 来传递请求相关的上下文信息和管理请求的生命周期。


### 阿里云容器服务 go-zero

阿里云容器服务（Alibaba Cloud Container Service）和 Go-Zero 是两个不同的概念。

阿里云容器服务是阿里云提供的基于 Kubernetes 的云原生容器化应用管理服务，它允许用户在阿里云上轻松地创建、管理和运行容器化应用。您可以使用阿里云容器服务来构建和部署基于容器的应用，它提供了集群管理、自动扩缩容、应用部署、监控和日志等功能。

而 Go-Zero 是一种 Go 语言开发的微服务框架，它专注于解决微服务架构中的常见问题，如服务发现、负载均衡、接口调用、限流熔断、日志追踪等。Go-Zero 提供了一系列的工具和库，帮助开发人员更轻松地构建和管理微服务应用。

如果您想在阿里云容器服务上使用 Go-Zero，您可以将您的 Go-Zero 微服务应用容器化，并使用阿里云容器服务进行部署和管理。您可以使用 Docker 将 Go-Zero 应用打包为容器镜像，然后将镜像上传到阿里云容器镜像服务，并使用阿里云容器服务来创建和管理您的容器集群。

总结来说，阿里云容器服务是一种容器化应用管理服务，而 Go-Zero 是一种微服务框架，您可以在阿里云容器服务上部署和管理使用 Go-Zero 开发的微服务应用。

### 熔断怎么做的

熔断是一种用于处理服务之间的通信故障的机制。当依赖的服务出现故障或响应时间过长时，熔断机制可以防止故障在整个系统中扩散，并提供适当的反馈给调用方，而不是无限制地等待响应或导致系统崩溃。

熔断机制通常用于处理以下情况：

1. 依赖服务故障：当您的系统依赖于其他服务或组件，而这些依赖的服务出现故障或无响应时，熔断机制可以防止故障在整个系统中扩散。通过熔断，您的系统可以快速失败而不是无限制地等待响应，从而保持对其他部分的可用性。
    
2. 服务超时：如果某个依赖服务的响应时间过长，熔断机制可以帮助您限制等待时间并快速失败。这可以避免因超时导致的系统资源浪费和性能下降。
    
3. 服务负载过重：当某个依赖服务的请求量过大，超过了其处理能力时，熔断机制可以帮助您限制对该服务的请求。通过熔断，您可以控制对过载服务的访问，从而保护系统的稳定性。
    
4. 服务异常或错误率高：如果某个依赖服务返回的错误率异常高，或者服务出现其他异常情况，熔断机制可以帮助您停止对该服务的调用，并提供适当的反馈或替代处理方式，以避免影响整个系统。

以下是一些常见的后端熔断实现方法：

1. 超时设置：为与其他服务的通信设置适当的超时时间。如果超过了预设的时间，可以判断该请求超时，并做出相应的处理，例如返回默认值或错误信息。
    
2. 故障计数器：对每个服务的调用进行计数。如果连续的调用失败次数超过一定阈值，就可以将该服务标记为故障状态。
    
3. 断路器模式：断路器是一种状态机，用于监控对服务的调用。当故障次数超过阈值时，断路器会切换到打开状态，此时所有对该服务的调用都会立即失败，而不会实际发送请求。在一段时间后，断路器会进入半开状态，允许一个请求通过以测试服务是否恢复正常。如果请求成功，则断路器会切换到关闭状态，否则会重新切换到打开状态。
    
4. 回退模式：当熔断发生时，可以提供备用的数据或功能。例如，返回缓存数据、默认值或简化的响应，以保证用户体验。
    

以上这些方法可以单独使用，也可以组合使用，具体实施取决于您的需求和技术栈。熔断机制的目标是提高系统的健壮性和可用性，确保系统能够在依赖服务故障时继续正常运行。

### 服务降级怎么搞

服务降级是在系统负载过高或出现故障的情况下，为了保证核心功能的可用性而临时关闭某些非核心或可选功能的策略。下面是一些常见的服务降级方法：

1. 功能切换：在系统负载过高或故障时，可以通过切换到简化的功能模式来进行服务降级。例如，可以关闭某些高消耗或复杂的功能，只提供最基本的核心功能。
    
2. 响应时间优化：在系统压力较大时，可以采取措施来优化响应时间，以降低用户等待时间。例如，可以缓存常用数据或计算结果，避免重复计算或查询数据库。
    
3. 数据精简：在系统负载高峰期，可以精简数据的处理和返回，以减少系统的负荷和响应时间。例如，可以限制返回的数据量、降低图像或文件的质量等。
    
4. 异步处理：将某些处理转为异步操作，以提高系统的并发能力。例如，将某些非关键的数据更新操作转换为异步任务，避免阻塞主要的请求处理。
    
5. 降级通知：当系统降级时，可以向用户提供适当的通知或提示，以告知系统当前的状态和受影响的功能。这样可以减少用户的困惑和不良体验。
    

在实施服务降级时，需要根据具体的业务需求和系统架构来确定降级的策略和方式。重要的是，在服务降级期间要确保核心功能的稳定和可用性，并在系统恢复正常后及时恢复降级的功能。服务降级应该是一个临时的措施，而不是长期的解决方案，目的是为了保护系统并提供基本的服务。

### 进程挂了怎么办

当进程挂了时，以下是一些常见的处理步骤：

1. 检查进程状态：确认进程是否真的挂掉，可以通过查看进程的状态和日志来获取相关信息。例如，使用操作系统提供的进程管理工具（如`ps`命令）查看进程状态，或者检查进程日志文件中是否有异常或错误信息。
    
2. 重启进程：如果进程挂掉是由于临时的故障或异常引起的，可以尝试重启进程。您可以手动启动进程，或者使用自动化工具（如进程管理器或监控系统）来监测并自动重启挂掉的进程。
    
3. 分析日志和错误信息：如果进程挂掉是由于错误或异常情况引起的，需要进一步分析日志和错误信息，以确定根本原因。日志和错误信息可能会提供有关发生故障的线索和错误堆栈跟踪。通过分析日志，您可以了解到底发生了什么，并采取相应的纠正措施。
    
4. 故障排查和修复：一旦您了解了故障的原因，可以进行故障排查并采取适当的措施来修复问题。这可能涉及修复代码中的错误、更新依赖的库或组件、调整系统配置或资源分配等。根据具体情况，您可能需要进行代码调试、性能优化或系统配置调整等操作。
    
5. 预防措施：为了防止进程再次挂掉，可以采取一些预防措施。这可能包括实施异常处理和错误处理机制、监控系统资源使用情况、定期检查和更新依赖组件、进行容灾和备份等。
    

在处理进程挂掉的情况时，关键是快速发现问题、确定根本原因，并采取适当的措施来修复和预防进程挂掉。日志和监控是非常有用的工具，可以帮助您实时了解系统的运行状况，并在出现故障时提供关键的信息。


1. [go-zero微服务实战系列（四、CRUD热热身）](https://www.cnblogs.com/kevinwan/p/16380728.html)
2. [goctl template 模板定制化](https://go-zero.dev/docs/tutorials/customization/template)